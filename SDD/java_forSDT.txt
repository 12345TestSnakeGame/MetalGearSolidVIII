S' S CLASS P P' PROCESS PARAMS PARAMS' DECLARE DECLARES RECORD DECLARE_NO_VALUE DECLARE_VALUE ASSIGN TYPE BASIC_TYPE LIST_TYPE ASSIGNMENT EXPRESSION EXPRESSION1 EXPRESSION2 V_ID ID1 STATEMENT_BOOL STATEMENT_BOOL' STATEMENT_BOOL'' IF ELSE WHILE FOR DO_WHILE CALL CLASS_QUALIFIER PROCESS_QUALIFIER relop LIST_LIKE ID_LIST ID_LIST_E LIST BASIC_LIST BASIC_LIST_LIKE ID
id LP RP SLP SRP left_square_brace right_square_brace empty Comma dot assignment IADD IMINUS INC DEC INT CHAR FLOAT plus minus Star / CONST And_bool Or_bool not LE GE NE right_angle_brackets left_angle_brackets True False SEMI ABSTRACT PUBLIC class public new if while for do else record


# 根节点部分，一个文件可以由多个class组成。暂不支持import
S' - S
S - CLASS S
S - empty


# 类声明部分，其中qualifier还需要补充
CLASS - CLASS_QUALIFIER class id LP P RP
CLASS_QUALIFIER - ABSTRACT
CLASS_QUALIFIER - PUBLIC
#CLASS_QUALIFIER - empty


# 类内部语句, P 就是正常的代码块
# P可以是：过程定义(方法定义)，记录声明，普通声明，赋值语句，if语句，while语句，for语句
P - empty
P - P' P
P' - PROCESS
P' - RECORD
P' - DECLARE SEMI
P' - ASSIGNMENT SEMI
P' - CALL SEMI
P' - IF
P' - WHILE
P' - DO_WHILE
P' - FOR


# 过程
PROCESS - PROCESS_QUALIFIER TYPE id SLP PARAMS SRP LP P RP
PROCESS_QUALIFIER - public
PARAMS - empty
PARAMS - EXPRESSION
PARAMS - EXPRESSION PARAMS'
PARAMS' - Comma EXPRESSION PARAMS'
PARAMS' - Comma EXPRESSION
# 声明，包括赋初值与不赋初值的情况dot不支持嵌套定义对象，但是支持嵌套定义函数
# java数组定义中要求前面的类型与后面的new的对象类型要是相同的列表，但是我觉得那应该是语法分析的内容
DECLARE - DECLARE_VALUE
DECLARE - DECLARE_NO_VALUE
DECLARE_NO_VALUE - TYPE id
DECLARE_VALUE - TYPE id assignment ASSIGN
ASSIGN - new id SLP PARAMS SRP
ASSIGN - EXPRESSION
#################################################
TYPE - BASIC_TYPE Array
#TYPE - id
BASIC_TYPE - INT
BASIC_TYPE - FLOAT
BASIC_TYPE - CHAR
TYPE - BASIC_TYPE Array
Array - empty
Array - left_square_brace CONST right_square_brace Array
##################################################
# 记录
RECORD - record id LP DECLARES RP SEMI
DECLARES - DECLARE SEMI DECLARES
DECLARES - DECLARE SEMI
# 赋值
ASSIGNMENT - V_ID assignment ASSIGN
ASSIGNMENT - V_ID IADD EXPRESSION
ASSIGNMENT - V_ID IMINUS EXPRESSION
ASSIGNMENT - V_ID INC
ASSIGNMENT - V_ID DEC
# A_EXPRESSION 是有值的表达式
# STATEMENT_BOOL 是布尔值表达式
# STATEMENT_CONST 是常量表达式
# 表达式求值。
EXPRESSION - EXPRESSION plus EXPRESSION1
EXPRESSION - EXPRESSION minus EXPRESSION1
EXPRESSION - EXPRESSION1
EXPRESSION1 - EXPRESSION1 Star EXPRESSION2
EXPRESSION1 - EXPRESSION1 / EXPRESSION2
EXPRESSION1 - EXPRESSION2
EXPRESSION2 - SLP EXPRESSION SRP
EXPRESSION2 - minus EXPRESSION2
EXPRESSION2 - plus EXPRESSION2
EXPRESSION2 - CONST
EXPRESSION2 - V_ID
EXPRESSION2 - CALL
# V_ID 为任何有值的变量
# ID 为单个的标识符
# 变量的构成
#V_ID - id ID1
#ID1 - empty
#ID1 - id
#ID1 - dot ID1
#ID1 - left_square_brace EXPRESSION right_square_brace ID1
#V_ID - id dot V_ID
#V_ID - id
############################################
V_ID - ID dot V_ID
V_ID - ID
ID - id Array
#ID1 - ID_LIST
#ID1 - ID_LIST left_square_brace EXPRESSION right_square_brace
#ID1 - id
#########################################################
STATEMENT_BOOL - STATEMENT_BOOL Or_bool STATEMENT_BOOL'
STATEMENT_BOOL - STATEMENT_BOOL'
STATEMENT_BOOL' - STATEMENT_BOOL' And_bool STATEMENT_BOOL''
STATEMENT_BOOL' - STATEMENT_BOOL''
STATEMENT_BOOL'' - not STATEMENT_BOOL''
STATEMENT_BOOL'' - SLP STATEMENT_BOOL SRP
STATEMENT_BOOL'' - EXPRESSION relop EXPRESSION
STATEMENT_BOOL'' - True
STATEMENT_BOOL'' - False
relop - NE
relop - GE
relop - LE
relop - left_angle_brackets
relop - right_angle_brackets
# 语句
IF - if SLP STATEMENT_BOOL SRP LP P RP ELSE
ELSE - else if SLP STATEMENT_BOOL SRP LP P RP ELSE
ELSE - else LP P RP
ELSE - empty
WHILE - while SLP STATEMENT_BOOL SRP LP P RP
DO_WHILE - do LP P RP while SLP STATEMENT_BOOL SRP SEMI
FOR - for SLP DECLARE_VALUE SEMI STATEMENT_BOOL SEMI ASSIGNMENT SRP LP P RP
# 过程调用
CALL - id SLP PARAMS SRP